<!doctype html>
<html lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />

    <!-- Enable responsiveness on mobile devices -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    
      
        
        <meta name="description" content="&amp;lt;æ–½å·¥ä¸­ğŸš§&amp;gt;
ç”¨åŸŸåå®šå‘åˆ°å±€åŸŸç½‘å†…ä½ å–œæ¬¢çš„webæœåŠ¡å¾ˆå¥½ï¼Œæœ‰ä¸ªå°ç¼ºç‚¹æ˜¯ä¸€æ—¦åœ¨å…¬å¸å†…ç½‘æˆ–æ ¡å›­ç½‘ä¸‹è¿™ä¹Ÿå°†å°†ä½ çš„æœåŠ¡æš´éœ²ç»™å…¶ä»–äººã€‚ä¸‡ä¸€ï¼ŒæŸå¤©åŒäº‹å¿ƒè¡€æ¥æ½®å¯¹ä½ è¿›è¡Œhttpæ”»å‡»å°±ä¸å¥½äº†ã€‚httpså°†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œæˆ‘ä½¿ç”¨step-caåœ¨mac osä¸ŠåŠ å¯†äº†æˆ‘çš„æ ‘è“æ´¾ä¸Šæ‰€æœ‰çš„æœåŠ¡ï¼Œå®ƒä»¬è¿è¡Œåœ°å¾ˆå¥½ï¼Œå¸Œæœ›è¿™ä¹Ÿèƒ½å¸®åˆ°ä½ " />
        <meta property="og:description" content="&amp;lt;æ–½å·¥ä¸­ğŸš§&amp;gt;
ç”¨åŸŸåå®šå‘åˆ°å±€åŸŸç½‘å†…ä½ å–œæ¬¢çš„webæœåŠ¡å¾ˆå¥½ï¼Œæœ‰ä¸ªå°ç¼ºç‚¹æ˜¯ä¸€æ—¦åœ¨å…¬å¸å†…ç½‘æˆ–æ ¡å›­ç½‘ä¸‹è¿™ä¹Ÿå°†å°†ä½ çš„æœåŠ¡æš´éœ²ç»™å…¶ä»–äººã€‚ä¸‡ä¸€ï¼ŒæŸå¤©åŒäº‹å¿ƒè¡€æ¥æ½®å¯¹ä½ è¿›è¡Œhttpæ”»å‡»å°±ä¸å¥½äº†ã€‚httpså°†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œæˆ‘ä½¿ç”¨step-caåœ¨mac osä¸ŠåŠ å¯†äº†æˆ‘çš„æ ‘è“æ´¾ä¸Šæ‰€æœ‰çš„æœåŠ¡ï¼Œå®ƒä»¬è¿è¡Œåœ°å¾ˆå¥½ï¼Œå¸Œæœ›è¿™ä¹Ÿèƒ½å¸®åˆ°ä½ " />
        <meta property="twitter:description" content="&amp;lt;æ–½å·¥ä¸­ğŸš§&amp;gt;
ç”¨åŸŸåå®šå‘åˆ°å±€åŸŸç½‘å†…ä½ å–œæ¬¢çš„webæœåŠ¡å¾ˆå¥½ï¼Œæœ‰ä¸ªå°ç¼ºç‚¹æ˜¯ä¸€æ—¦åœ¨å…¬å¸å†…ç½‘æˆ–æ ¡å›­ç½‘ä¸‹è¿™ä¹Ÿå°†å°†ä½ çš„æœåŠ¡æš´éœ²ç»™å…¶ä»–äººã€‚ä¸‡ä¸€ï¼ŒæŸå¤©åŒäº‹å¿ƒè¡€æ¥æ½®å¯¹ä½ è¿›è¡Œhttpæ”»å‡»å°±ä¸å¥½äº†ã€‚httpså°†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œæˆ‘ä½¿ç”¨step-caåœ¨mac osä¸ŠåŠ å¯†äº†æˆ‘çš„æ ‘è“æ´¾ä¸Šæ‰€æœ‰çš„æœåŠ¡ï¼Œå®ƒä»¬è¿è¡Œåœ°å¾ˆå¥½ï¼Œå¸Œæœ›è¿™ä¹Ÿèƒ½å¸®åˆ°ä½ " />
      
    

    <!-- Title -->
    
      
    
    <title>
    
    step-ca: è‡ªæ‹“ç®¡CAæ•™ç¨‹
    
</title>

    <!-- Additional Facebook Meta Tags -->
    <meta property="og:site_name" content="" />
    <meta
      property="og:url"
      content="https:&#x2F;&#x2F;nan-mu.asia&#x2F;zh&#x2F;step-ca-zi-tuo-guan-cajiao-cheng&#x2F;"
    />
    <meta
      property="og:type"
      content="article"
    />
    <meta property="og:title" content="step-ca: è‡ªæ‹“ç®¡CAæ•™ç¨‹" />

    <!-- Additional Twitter Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      property="twitter:url"
      content="https:&#x2F;&#x2F;nan-mu.asia&#x2F;zh&#x2F;step-ca-zi-tuo-guan-cajiao-cheng&#x2F;"
    />
    <meta name="twitter:title" content="step-ca: è‡ªæ‹“ç®¡CAæ•™ç¨‹" />

    <!-- Additional Fediverse Tags -->
     

    <!-- Cover images -->
    
    

    <meta
      property="og:image"
      content="https:&#x2F;&#x2F;nan-mu.asia&#x2F;icons&#x2F;favicon&#x2F;web-app-manifest-512x512.png"
    />

    <meta
      name="twitter:image"
      content="https:&#x2F;&#x2F;nan-mu.asia&#x2F;icons&#x2F;favicon&#x2F;web-app-manifest-512x512.png"
    />

    <!-- Favicons -->
    
    <link
      rel="icon"
      type="image/png"
      href="https:&#x2F;&#x2F;nan-mu.asia/icons/favicon/favicon-96x96.png"
      sizes="96x96"
    />
    <link
      rel="icon"
      type="image/svg+xml"
      href="https:&#x2F;&#x2F;nan-mu.asia/icons/favicon/favicon.svg"
    />
    <link
      rel="shortcut icon"
      href="https:&#x2F;&#x2F;nan-mu.asia/icons/favicon/favicon.ico"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="https:&#x2F;&#x2F;nan-mu.asia/icons/favicon/apple-touch-icon.png"
    />
    <meta name="apple-mobile-web-app-title" content="step-ca: è‡ªæ‹“ç®¡CAæ•™ç¨‹" />
    <link
      rel="manifest"
      href="https:&#x2F;&#x2F;nan-mu.asia/icons/favicon/site.webmanifest"
    />
    

    <!-- RSS Feed -->
    

    <!-- Load Styles -->
    
      <link
        rel="stylesheet"
        href="https://nan-mu.asia/site.css"
      />
    

    <!-- Syntax highlighting theming -->
    

    <!-- Load Fonts -->
    

  






  
    <link href="https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;npm&#x2F;cn-fontsource-lxgw-wen-kai-gb-screen&#x2F;font.css" rel="stylesheet">
  



<!-- Forcing Font -->
<style>
body {
  font-family:
    "LXGW WenKai GB Screen", Menlo, Monaco, Lucida Console, Liberation Mono,
    DejaVu Sans Mono, Bitstream Vera Sans Mono, Courier New,
    monospace, serif !important;
}
</style>


    <!-- Pass Theme Preference as Data Attribute -->
    <script src="https://nan-mu.asia/js/init-theme.js"></script>

    <!-- Reference return to click position script -->
    <script defer src="https://nan-mu.asia/js/reference-return.js"></script>

    <!-- Additional scripts -->
    
      
        <script defer src="https://nan-mu.asia/js/codeblock.js"></script>
      
      
        <script src="https://nan-mu.asia/js/toggle-theme.js"></script>
      
      
<!-- MathJax script for rendering LaTeX math equations -->
<script src="https://nan-mu.asia/js/mathjax-config.js"></script>
<script
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"
  async
></script>


      
<script type="text/javascript" src="https://nan-mu.asia/elasticlunr.min.js"></script>
<script type="text/javascript" src="https://nan-mu.asia/js/search.js"></script>

    
  </head>

  <!-- Body element (contents of the page) -->
  <body class="hack main container">
    
  
    
    
      
  
  <section class="nav-header">
    <nav
      itemscope
      itemtype="http://schema.org/SiteNavigationElement"
      class="navbar"
    >
      <section class="nav-links">
        
        <a
          itemprop="url"
          class=""
          href="https://nan-mu.asia/"
        >
          <span itemprop="name">Home</span>
        </a>
        
        <a
          itemprop="url"
          class=""
          href="https://nan-mu.asia/categories"
        >
          <span itemprop="name">Categories</span>
        </a>
        
        <a
          itemprop="url"
          class=""
          href="https://nan-mu.asia/tags"
        >
          <span itemprop="name">Tags</span>
        </a>
        
      </section>
    </nav>
    <aside class="user-actions-container">
      
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="1.5"
        class="search-icon"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"
        />
      </svg>
      <input type="text" id="search" placeholder="Search..." />
      <section class="search-results" aria-live="polite">
        <article class="search-results__items" role="list"></article>
      </section>
       
      <a id="dark-mode-toggle" href="#">
        <img
          src="https://nan-mu.asia/icons/sun.svg"
          id="sun-icon"
          class="invert-icon"
          alt="Light mode"
        />
        <img
          src="https://nan-mu.asia/icons/moon.svg"
          id="moon-icon"
          alt="Dark mode"
        />
      </a>
        
      <a
        href="https:&#x2F;&#x2F;github.com&#x2F;nan-mu"
        class="feed-icon"
        rel="noopener noreferrer"
      >
        <img
          src="https://nan-mu.asia/icons/github.svg"
          id="github-icon"
          alt="GitHub"
          class="social-icon"
        />
      </a>
        
      <div class="lang-dropdown-container">
        <button
          class="lang-dropdown-btn"
          id="lang-dropdown-btn"
          aria-haspopup="listbox"
          aria-expanded="false"
          aria-controls="lang-dropdown-menu"
          type="button"
        >
          ä¸­æ–‡
        </button>
        <div
          class="lang-dropdown-menu"
          id="lang-dropdown-menu"
          role="listbox"
        >
          
            
            
              
              
            
            
            <a href="https://nan-mu.asia/jp/">
              æ—¥æœ¬èª
            </a>
          
            
            
              
              
            
            
            <a href="https://nan-mu.asia">
              English
            </a>
          
        </div>
      </div> 
    </aside>
  </section>
  

    


    <main>
      

<article itemscope itemtype="http://schema.org/BlogPosting">
    <header>
        <h1 itemprop="headline">step-ca: è‡ªæ‹“ç®¡CAæ•™ç¨‹</h1>
        <data class="muted">
    <svg class="icon i-clock" viewBox="0 0 32 32"
         width="16" height="16" fill="none" stroke="currentcolor"
         stroke-linecap="round" stroke-linejoin="round" stroke-width="6.25%">
        <circle cx="16" cy="16" r="14"/>
        <path d="M16 8 L16 16 20 20"/>
    </svg>
    <data>5 minute read</data>
    <svg class="icon i-edit" viewBox="0 0 32 32"
         width="16" height="16" fill="none" stroke="currentcolor"
         stroke-linecap="round" stroke-linejoin="round" stroke-width="6.25%">
        <path d="M30 7 L25 2 5 22 3 29 10 27 Z M21 6 L26 11 Z M5 22 L10 27 Z"/>
    </svg>

    Published: 2025-11-18
</data>
    </header>

    <article itemprop="articleBody">
        
            <p>&lt;æ–½å·¥ä¸­ğŸš§&gt;
ç”¨åŸŸåå®šå‘åˆ°å±€åŸŸç½‘å†…ä½ å–œæ¬¢çš„webæœåŠ¡å¾ˆå¥½ï¼Œæœ‰ä¸ªå°ç¼ºç‚¹æ˜¯ä¸€æ—¦åœ¨å…¬å¸å†…ç½‘æˆ–æ ¡å›­ç½‘ä¸‹è¿™ä¹Ÿå°†å°†ä½ çš„æœåŠ¡æš´éœ²ç»™å…¶ä»–äººã€‚ä¸‡ä¸€ï¼ŒæŸå¤©åŒäº‹å¿ƒè¡€æ¥æ½®å¯¹ä½ è¿›è¡Œhttpæ”»å‡»å°±ä¸å¥½äº†ã€‚httpså°†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œæˆ‘ä½¿ç”¨step-caåœ¨mac osä¸ŠåŠ å¯†äº†æˆ‘çš„æ ‘è“æ´¾ä¸Šæ‰€æœ‰çš„æœåŠ¡ï¼Œå®ƒä»¬è¿è¡Œåœ°å¾ˆå¥½ï¼Œå¸Œæœ›è¿™ä¹Ÿèƒ½å¸®åˆ°ä½ </p>

            

            <!-- Render the rest of the content after removing the summary portion -->
            
<span id="continue-reading"></span>
<p>æˆ‘çš„çš„ç›®æ ‡æ˜¯é€šè¿‡åŸŸåæŒ‡å‘ä¸€å°æ ‘è“æ´¾ä¸Šçš„æ‰€æœ‰æœåŠ¡ï¼Œä½†æœ‰ç‚¹ç‰¹æ®Šçš„æ˜¯æˆ‘å¸Œæœ›ä¸ºä¸¤ä¸ªç½‘æ®µä¸Šéƒ½ç­¾å‘å„è‡ªçš„è¯ä¹¦ã€‚æ¯”å¦‚åœ¨<code>192.168.2.x</code>ä¸Šçš„åŸŸåæ˜¯*.moonrpi.asiaï¼Œåœ¨<code>172.168.x</code>ä¸Šçš„åŸŸåæ˜¯*.xxx.moonrpi.asiaã€‚å› ä¸ºå‰è€…æ˜¯äº¤æ¢æœºè®¾å¤‡çš„ç½‘æ®µåè€…æ˜¯å…¬å…±wifiçš„ç½‘æ®µã€‚ç†è®ºä¸Šåº”è¯¥æœ‰åŠæ³•ä½¿ç”¨ä¸€ä¸ªåŸŸåè‡ªåŠ¨æ‰¾åˆ°æœ€ä½³ipï¼Œä½†æˆ‘ç°åœ¨ä¸æ‰“ç®—åšï¼Œæˆ‘è¿˜ä¸çŸ¥é“å¦‚ä½•åšã€‚</p>
<p>åœ¨æˆ‘çš„ç½‘ç»œä¸­ï¼Œæœ‰ä¸€å°mac miniè¿æ¥å¤–ç½‘å¹¶ä¸”è¿æ¥äº¤æ¢æœºã€‚æ‰€ä»¥æˆ‘å°†å®ƒä½œä¸ºcaæœåŠ¡å™¨ï¼Œä¹Ÿå°±æ˜¯è¿è¡Œstep-caã€‚æ‰€ä»¥ç¬¬ä¸€æ­¥åº”è¯¥å®‰è£…step-caï¼Œæˆ‘å»ºè®®å‚è€ƒ<a href="https://smallstep.com/docs/step-ca/installation/">è¿™é‡Œ</a>ä»¥é€‚åº”ä¸åŒå¹³å°ã€‚ä½†ä½ é¦–å…ˆåº”è¯¥æ˜ç™½ä¸€äº›äº‹ã€‚</p>
<p>CAçš„ä½œç”¨æ˜¯ç»™å…¶ä»–æœåŠ¡ç­¾å‘è¯ä¹¦ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­åªä¼šç”¨åˆ°è¿™äº›ï¼š</p>
<ul>
<li>æ ¹è¯ä¹¦<code>root_ca.crt</code>ï¼Œè¿™æ˜¯æœåŠ¡å™¨çš„å…¬é’¥<sup class="footnote-reference"><a href="#1">1</a></sup>ã€‚ä½ éœ€è¦ä¸‹è½½åˆ°ä½ ï¼Œä½¿ç”¨httpsçš„å®¢æˆ·ç«¯ä¸­ã€‚æ¯”å¦‚ä½ ç»™ä½ çš„jellyfinæœåŠ¡å™¨å®‰è£…äº†httpsè¯ä¹¦ï¼Œé‚£<code>root_ca.crt</code>åº”è¯¥å®‰è£…åœ¨è®¿é—®å®ƒçš„åœ°æ–¹ï¼Œå½“ç„¶ï¼Œè¿™æ˜¯ä½¿ç”¨httpsçš„ä¸€ç§æ–¹æ³•ï¼Œæˆ‘ä½¿ç”¨å®ƒï¼Œå®ƒç›¸å¯¹ç®€å•ã€‚ä½†è¦æ³¨æ„ï¼Œä»–çš„å†…å®¹æ²¡æœ‰å—åˆ°ä»»ä½•<code>æ‹…ä¿</code>ã€‚</li>
<li>ä¸­é—´å¯†é’¥<sup class="footnote-reference"><a href="#2">2</a></sup><code>intermediate_ca.key</code>ã€‚å¯ä»¥ç†è§£ä¸ºï¼ŒCAä¿¡ä»»ä¸€å°è®¾å¤‡ï¼ˆå¯ä»¥æ˜¯ä¸‹çº§CAæˆ–æœåŠ¡å™¨ï¼‰ï¼Œæ‰€ä»¥ç»™ä»–ä¸€ä¸ªä¸­é—´è¯ä¹¦æ¥ç­¾å‘è‡ªå·±çš„æœåŠ¡å™¨è¯ä¹¦ï¼Œæˆ–è€…ç”¨å®ƒåœ¨CAè‡ªå·±çš„æœåŠ¡å™¨ç­¾å‘ï¼Œæ€»ä¹‹ï¼Œç›´æ¥ç”¨æ ¹è¯ä¹¦ç­¾å‘æ˜¯å¯èƒ½çš„ï¼Œä½†ä¸å¸¸è§ã€‚</li>
<li>æœåŠ¡å™¨å¯†é’¥<code>server.key</code>ã€‚è¿™æ˜¯æœåŠ¡å™¨ç»™è‡ªå·±çš„è¯æ˜ï¼Œä¸»è¦æ˜¯ç”¨æ¥åŠ å¯†æœåŠ¡å™¨è¯ä¹¦ã€‚ä½¿ç”¨ä¸­é—´å¯†é’¥å’ŒæœåŠ¡å™¨å¯†é’¥ï¼ˆå½“ç„¶å¦‚æœè¯ä¹¦æœ‰å¯†ç é‚£è¿˜æ˜¯æ²¡æ³•é¿å…çš„ï¼‰å°±æ˜¯è®¾ç½®httpsæ‰€éœ€çš„ä¸€åˆ‡ã€‚</li>
<li>ä¸­é—´è¯ä¹¦<code>intermediate_ca.crt</code>å’ŒæœåŠ¡å™¨è¯ä¹¦<code>server.crt</code>ã€‚å‰è€…CAå¾—åˆ°ï¼Œåè€…é€šè¿‡ä¸­é—´å¯†é’¥å’ŒæœåŠ¡å™¨å¯†é’¥ç­¾å‘ã€‚å®ƒä»¬ä¸¤è€…æ„æˆäº†è®¤è¯é“¾ï¼ˆ<code>fullchain</code>ï¼‰ã€‚å½“ç”¨æˆ·çš„è¯·æ±‚å‘åˆ°æœåŠ¡å™¨åï¼ŒæœåŠ¡å™¨è¿”å›è¿™ä¸¤ä¸ªè¯ä¹¦å’Œå®ƒä»¬çš„ç­¾åã€‚è€Œæ ¹è¯ä¹¦å¯ä»¥è®¤è¯è¿™äº›ä¿¡æ¯æ˜¯å¦çœŸå®ã€‚</li>
<li>æœåŠ¡å™¨å¯†é’¥<code>server.key</code>ï¼Œè¿™æ˜¯ç­¾ååçš„äº§ç‰©ï¼Œåªä¼šæ”¾åœ¨æœåŠ¡å™¨ä¸­ï¼Œç”¨äºåŠ å¯†ä¿¡æ¯ç»™å®¢æˆ·ç«¯çš„å…¬é’¥è§£å¯†ã€‚</li>
</ul>
<p>æ‰€ä»¥é¢å‘è¯ä¹¦çš„è¿‡ç¨‹å°±æ˜¯ä»¥ä¸‹å‡ æ­¥ï¼š</p>
<ol>
<li>æä¾›<code>server.key</code>å’Œ<code>intermediate_ca.key</code>å’Œå¿…è¦ä¿¡æ¯å¾—åˆ°<code>server.crt</code></li>
<li>å°†<code>sercer.crt</code>å’Œ<code>intermediate_ca.crt</code>åˆæˆ<code>fullchain.crt</code></li>
<li>åœ¨ä½ çš„webæœåŠ¡æˆ–åå‘ä»£ç†ä¸­æ·»åŠ <code>fullchain.crt</code>å’Œ<code>server.key</code></li>
</ol>
<h2 id="de-dao-intermediate-ca"><a class="zola-anchor" href="#de-dao-intermediate-ca" aria-label="Anchor link for: de-dao-intermediate-ca">å¾—åˆ°<code>intermediate_ca</code></a></h2>
<p>ç°åœ¨æˆ‘è¦ç»™æˆ‘å±€åŸŸç½‘ä¸Šçš„æœåŠ¡ç”¨å±€åŸŸç½‘ä¸Šçš„caé¢å‘httpsè¯ä¹¦ã€‚caåœ¨macä¸Šï¼Œipæ˜¯192.168.2.1ã€‚æœåŠ¡å™¨æ˜¯linuxï¼Œä½¿ç”¨caddyï¼Œæœ‰å¤šä¸ªipã€‚æˆ‘éœ€è¦é¢å‘çš„åŸŸåå¦‚ä¸‹ï¼š
è¿™äº›ç»™ip:172.30.15.104
alist.cug.moonrpi.asia
ani.cug.moonrpi.asia
ani-qbit.cug.moonrpi.asia
bc.cug.moonrpi.asia
ddns.cug.moonrpi.asia
jelly.cug.moonrpi.asia
pbh.cug.moonrpi.asia
qbit.cug.moonrpi.asia</p>
<p>è¿™äº›ç»™ip192.168.2.2</p>
<p>alist.moonrpi.asia
ani.moonrpi.asia
ani-qbit.moonrpi.asia
bc.moonrpi.asia
jelly.moonrpi.asia
pbh.moonrpi.asia
qbit.moonrpi.asia
ddns.moonrpi.asia</p>
<p>ä½ é¦–å…ˆåº”è¯¥å°†è¿™äº›ipç”Ÿæˆä¸€ä¸ªtokensï¼Œç„¶ååˆtokenså¾—åˆ°æœåŠ¡å™¨è¯ä¹¦ã€‚ç„¶åå°†ä¸­é—´è¯ä¹¦å’ŒæœåŠ¡å™¨è¯ä¹¦æ··åˆå¾—åˆ°å®Œæ•´è¯ä¹¦é“¾ã€‚è¿™äº›æ“ä½œåº”è¯¥åœ¨æœåŠ¡å™¨ä¸Šè¿›è¡Œï¼ŒæœåŠ¡å™¨ä¸Šå·²ç»æœ‰ä¸­é—´è¯ä¹¦å’Œå¯†é’¥ã€‚</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#6c7079;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="font-style:italic;color:#5f697a;"># ç”Ÿæˆä¸€ä¸ªæ–°çš„ç§é’¥ (2048ä½)
</span><span style="color:#eb6772;">openssl</span><span style="color:#abb2bf;"> genpkey</span><span style="color:#eb6772;"> -algorithm</span><span style="color:#abb2bf;"> RSA</span><span style="color:#eb6772;"> -out</span><span style="color:#abb2bf;"> server-172.30.15.104.key</span><span style="color:#eb6772;"> -pkeyopt</span><span style="color:#abb2bf;"> rsa_keygen_bits:2048
</span><span style="color:#eb6772;">openssl</span><span style="color:#abb2bf;"> genpkey</span><span style="color:#eb6772;"> -algorithm</span><span style="color:#abb2bf;"> RSA</span><span style="color:#eb6772;"> -out</span><span style="color:#abb2bf;"> server-192.168.2.2.key</span><span style="color:#eb6772;"> -pkeyopt</span><span style="color:#abb2bf;"> rsa_keygen_bits:2048
</span><span style="color:#abb2bf;">
</span><span style="font-style:italic;color:#5f697a;"># åˆ—å‡º 172.30.15.104 å¯¹åº”çš„åŸŸåå’Œ IP
</span><span style="color:#eb6772;">SAN_172</span><span style="color:#adb7c9;">=</span><span style="color:#9acc76;">&quot;DNS:alist.cug.moonrpi.asia, DNS:ani.cug.moonrpi.asia, DNS:ani-qbit.cug.moonrpi.asia, DNS:bc.cug.moonrpi.asia, DNS:ddns.cug.moonrpi.asia, DNS:jelly.cug.moonrpi.asia, DNS:pbh.cug.moonrpi.asia, DNS:qbit.cug.moonrpi.asia, IP:172.30.15.104&quot;
</span><span style="color:#abb2bf;">
</span><span style="font-style:italic;color:#5f697a;"># ä½¿ç”¨ç§é’¥å’Œ SAN æ‰©å±•ç”Ÿæˆ CSR
</span><span style="color:#eb6772;">openssl</span><span style="color:#abb2bf;"> req</span><span style="color:#eb6772;"> -new -key</span><span style="color:#abb2bf;"> server-172.30.15.104.key</span><span style="color:#eb6772;"> -out</span><span style="color:#abb2bf;"> server-172.30.15.104.csr \
</span><span style="color:#eb6772;">-subj </span><span style="color:#9acc76;">&quot;/CN=cug.moonrpi.asia-services/O=MoonRPI/L=Local/C=CN&quot; </span><span style="color:#abb2bf;">\
</span><span style="color:#eb6772;">-addext </span><span style="color:#9acc76;">&quot;subjectAltName=$</span><span style="color:#eb6772;">SAN_172</span><span style="color:#9acc76;">&quot;
</span><span style="color:#abb2bf;">
</span><span style="font-style:italic;color:#5f697a;"># åˆ—å‡º 192.168.2.2 å¯¹åº”çš„åŸŸå
</span><span style="color:#eb6772;">SAN_192</span><span style="color:#adb7c9;">=</span><span style="color:#9acc76;">&quot;DNS:alist.moonrpi.asia, DNS:ani.moonrpi.asia, DNS:ani-qbit.moonrpi.asia, DNS:bc.moonrpi.asia, DNS:jelly.moonrpi.asia, DNS:pbh.moonrpi.asia, DNS:qbit.moonrpi.asia, DNS:ddns.moonrpi.asia, IP:192.168.2.2&quot;
</span><span style="color:#abb2bf;">
</span><span style="font-style:italic;color:#5f697a;"># ä½¿ç”¨ç§é’¥å’Œ SAN æ‰©å±•ç”Ÿæˆ CSR
</span><span style="color:#eb6772;">openssl</span><span style="color:#abb2bf;"> req</span><span style="color:#eb6772;"> -new -key</span><span style="color:#abb2bf;"> server-192.168.2.2.key</span><span style="color:#eb6772;"> -out</span><span style="color:#abb2bf;"> server-192.168.2.2.csr \
</span><span style="color:#eb6772;">-subj </span><span style="color:#9acc76;">&quot;/CN=moonrpi.asia-services/O=MoonRPI/L=Local/C=CN&quot; </span><span style="color:#abb2bf;">\
</span><span style="color:#eb6772;">-addext </span><span style="color:#9acc76;">&quot;subjectAltName=$</span><span style="color:#eb6772;">SAN_192</span><span style="color:#9acc76;">&quot;
</span><span style="color:#abb2bf;">
</span><span style="font-style:italic;color:#5f697a;"># 1. åœ¨ Linux æœåŠ¡å™¨ä¸Šï¼ˆå¦‚æœä¹‹å‰æ²¡æœ‰ï¼Œé‡æ–°è®¾ç½® SAN å˜é‡ï¼‰
</span><span style="color:#eb6772;">SAN_172</span><span style="color:#adb7c9;">=</span><span style="color:#9acc76;">&quot;DNS:alist.cug.moonrpi.asia, DNS:ani.cug.moonrpi.asia, DNS:ani-qbit.cug.moonrpi.asia, DNS:bc.cug.moonrpi.asia, DNS:ddns.cug.moonrpi.asia, DNS:jelly.cug.moonrpi.asia, DNS:pbh.cug.moonrpi.asia, DNS:qbit.cug.moonrpi.asia, IP:172.30.15.104&quot;
</span><span style="color:#abb2bf;">
</span><span style="font-style:italic;color:#5f697a;"># 2. å°†æ‰©å±•é…ç½®å†™å…¥ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ (e.g., san_config_172.ext)
</span><span style="color:#5ebfcc;">echo </span><span style="color:#9acc76;">&quot;subjectAltName=$</span><span style="color:#eb6772;">SAN_172</span><span style="color:#9acc76;">&quot; </span><span style="color:#adb7c9;">&gt;</span><span style="color:#abb2bf;"> san_config_172.ext
</span><span style="color:#5ebfcc;">echo </span><span style="color:#9acc76;">&quot;extendedKeyUsage=serverAuth&quot; </span><span style="color:#adb7c9;">&gt;&gt;</span><span style="color:#abb2bf;"> san_config_172.ext
</span><span style="color:#abb2bf;">
</span><span style="font-style:italic;color:#5f697a;"># åœ¨ macOS CA ä¸Šæ‰§è¡Œç­¾åå‘½ä»¤
</span><span style="color:#eb6772;">openssl</span><span style="color:#abb2bf;"> x509</span><span style="color:#eb6772;"> -req -in</span><span style="color:#abb2bf;"> server-172.30.15.104.csr \
</span><span style="color:#eb6772;">    -CA</span><span style="color:#abb2bf;"> intermediate_ca.crt</span><span style="color:#eb6772;"> -CAkey</span><span style="color:#abb2bf;"> intermediate_ca.key \
</span><span style="color:#eb6772;">    -CAcreateserial -out</span><span style="color:#abb2bf;"> server-172.30.15.104.crt \
</span><span style="color:#eb6772;">    -days</span><span style="color:#abb2bf;"> 3650</span><span style="color:#eb6772;"> -sha256 </span><span style="color:#abb2bf;">\
</span><span style="color:#eb6772;">    -extfile</span><span style="color:#abb2bf;"> san_config_172.ext
</span><span style="color:#abb2bf;">
</span><span style="font-style:italic;color:#5f697a;"># æ„å»º 172.30.15.104 çš„è¯ä¹¦é“¾
</span><span style="color:#eb6772;">cat</span><span style="color:#abb2bf;"> server-172.30.15.104.crt intermediate_ca.crt </span><span style="color:#adb7c9;">&gt;</span><span style="color:#abb2bf;"> fullchain-172.30.15.104.pem
</span><span style="color:#abb2bf;">
</span><span style="font-style:italic;color:#5f697a;"># æ„å»º 192.168.2.2 çš„è¯ä¹¦é“¾
</span><span style="color:#eb6772;">cat</span><span style="color:#abb2bf;"> server-192.168.2.2.crt intermediate_ca.crt </span><span style="color:#adb7c9;">&gt;</span><span style="color:#abb2bf;"> fullchain-192.168.2.2.pem
</span></code></pre>
<h2 id="can-kao"><a class="zola-anchor" href="#can-kao" aria-label="Anchor link for: can-kao">å‚è€ƒ</a></h2>
<div class="footnote-definition" id="1"><sup class="footnote-definition-label">1</sup>
<p>éå¯¹ç§°åŠ å¯† https://zh.wikipedia.org/wiki/%E5%85%AC%E5%BC%80%E5%AF%86%E9%92%A5%E5%8A%A0%E5%AF%86</p>
</div>
<div class="footnote-definition" id="2"><sup class="footnote-definition-label">2</sup>
<p>ä¸­é—´è¯ä¹¦ https://www.ssldragon.com/zh/blog/root-intermediate-certificate/</p>
</div>


        
    </article>

    <!-- Comment section -->
    
      
        
          <script
  src="https://giscus.app/client.js"
  data-repo="nan-mu&#x2F;nan-mu.github.io"
  data-repo-id="R_kgDOMkLDRQ"
  data-category="General"
  data-category-id="DIC_kwDOMkLDRc4CtsQb"
  data-mapping="pathname"
  data-strict="0"
  data-reactions-enabled="1"
  data-emit-metadata="0"
  data-input-position="bottom"

  
  data-theme="preferred_color_scheme"
  

  data-lang="en"
  data-loading="lazy"
  crossorigin="anonymous"
  async
></script>

        
      
    


    <!-- Page footer -->
    
    <footer>
        <hr>
        <p>
            
            
            
        </p>

        <!-- Revision history (optional) -->
        
          
            
              
                
                
                <section class="revision-history">
                  <a href="https:&#x2F;&#x2F;github.com&#x2F;nan-mu&#x2F;nan-mu.github.io&#x2F;commits&#x2F;main&#x2F;content&#x2F;step-ca: è‡ªæ‰˜ç®¡CAæ•™ç¨‹.zh.md" target="_blank" rel="noopener noreferrer">
                    (revision history)
                  </a>
                </section>
              
            
          
        

        
        
    </footer>


</article>


    </main>
    

  </body>
</html>
